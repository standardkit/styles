@use '../../mixins/flavors' as *;
@use '../../utilities/base' as *;
@use '../../utilities/modifiers' as *;

$component-modifiers: [color, fill, margin, padding, size, corner, border] !default;

@mixin alert($configuration: (), $modifiers: ()) {
  @include flavors-and-types(alert, $configuration, $modifiers, $component-modifiers);
  @include flavors-and-types(alert__icon, $configuration, $modifiers, [position]);
  @include flavors-and-types(alert__dismiss, $configuration, $modifiers, [position]);

  .alert {
    display: flex;
    align-items: center;

    .alert__content {
      flex-grow: 1;
    }

    .alert__icon {
      margin-right: 1em; // TODO : Migrate alert icon to gap system
    }

    .alert__dismiss {
      margin-left: 1em; // TODO : Migrate alert dismiss to gap system
      cursor: pointer;
    }

    $padding: get-default-flavor($configuration, 'padding');
    $padding: get-default-flavor($modifiers, 'padding') !default;
    @include alert-dismiss($padding);

    @each $key, $value in map-exclude-prefixed-keys($configuration, default-) {
      &--#{$key} {
        $padding: get-default-flavor($value, 'padding');
        @if not is-null($padding) {
          @include alert-dismiss($padding);
        }
      }
    }

    @each $key, $value in get-flavors($modifiers, 'padding') {
      &.padding--#{$key} {
        @include alert-dismiss($value);
      }
    }
  }
}

@mixin alert-dismiss($padding: []) {
  $padding-x: get-padding-x($padding);
  $padding-y: get-padding-y($padding);
  margin-right: -$padding-x;
  margin-top: -$padding-y;
  margin-bottom: -$padding-y;
}
